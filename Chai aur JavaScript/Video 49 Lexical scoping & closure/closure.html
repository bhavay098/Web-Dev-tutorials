<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closure</title>
</head>

<body style="background-color: rgb(63, 63, 63);">
    <button id="orange">Orange</button>
    <button id="green">Green</button>
</body>
<script>
    // ++++++++++ Lexical scoping +++++++++++++++++++

    // function init() {
    //     let name = "Mozilla";   // name is a local variable created by init
    //     function displayName() {   // displayName() is the inner function, that forms a closure
    //         console.log(name);   // use variable declared in the parent function
    //     }
    //     displayName();
    // }
    // init();


    // function outer() {
    //     let username = 'bhavay'
    //     console.log(secret)  // error as only child can borrow from parent but parent cannot
    //     function inner() {
    //         let secret = 'my123'
    //         console.log('inner', username)  // this is valid as inner function is defined within the outer function
    //     }
    //     function innerTwo(){
    //         console.log('innerTwo', username)
    //         console.log(secret)   // innerTwo cannot access secret as it's inside inner function scope
    //     }
    //     inner()
    //     innerTwo()
    // }
    // outer()
    // console.log('Too outer', username);  // error as username is within the function so it can't be accessed outside the function block


    // +++++++++ Closure +++++++++++++++++++

    // function makeFunc() {
    //     const name = "Mozilla";
    //     function displayName() {
    //         console.log(name);
    //     }
    //     return displayName;
    // }

    // const myFunc = makeFunc();  // makeFunc() is called, but returns displayName function 
                                   // makeFunc() returns displayName, so myFunc now holds the displayName function.
                                
    // myFunc();   // Output: bhavay

    // INTERVIEW!! - closure means when we return a function, it's whole lexical scope also gets returned

</script>

<script>
    // +++++++++ Practical example of closure +++++++++++++++++

    // document.getElementById('orange').onclick = function(){
    //     document.body.style.backgroundColor = 'orange'
    // }
    // document.getElementById('green').onclick = function(){
    //     document.body.style.backgroundColor = 'green'
    // }

    function clickHandler(color){
        // document.body.style.backgroundColor = `${color}`

        return function(){   // returns a function that, when called, will change the background color.
            document.body.style.backgroundColor = `${color}`
        }
    }

    document.getElementById('orange').onclick = clickHandler('orange')  // clickHandler() returns the function which is assigned to onclick
    // So, when we click the orange button, the assigned function executes, setting:
    document.getElementById('green').onclick = clickHandler('green')
</script>

</html>